"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}!function(e){window.builder={init:function(){this.currentRow="",this.currentColumn="",this.currentBuilder="",this.currentRowInput="",this.componentsOrder="",this.currentColumnPos="",this.currentComponent="",this.currentBuilderType="",this.updateGridDelay=150,this.currentDevice="desktop",this.builderGridContentFlag=!1,this.preventEmptyRowValues(),this.elementNavigation(),this.elementsPopup(),this.elementsButton(),this.storeGlobals(),this.elementsPopupContent(),this.builderGridContent(),this.elementsSortable(),this.builderCustomColumns(),this.builderColumnsLayout(),this.showHideBuilder(),this.showHideBuilderTop()},jsonDecode:function(e){return JSON.parse(e.replace(/'/g,'"').replace(";",""))},preventEmptyRowValues:function(){for(var t=["above","main","below"],r=0,o=["header","footer"];r<o.length;r++){var n,a=o[r],i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var u=n.value;""==e("#_customize-input-knote_builder_"+a+"_row_"+u).val()&&e("#_customize-input-knote_builder_"+a+"_row_"+u).val(knote_builder.rows.defaults[a+"_row_"+u])}}catch(e){i.e(e)}finally{i.f()}}""==e("#_customize-input-knote_builder_mobile_offcanvas").val()&&e("#_customize-input-knote_builder_mobile_offcanvas").val(knote_builder.rows.defaults.mobile_offcanvas)},elementNavigation:function(){for(var t=["sub-accordion-section-knote_section_header_row_above","sub-accordion-section-knote_section_header_row_main","sub-accordion-section-knote_section_header_row_below","sub-accordion-section-knote_header_component_button","sub-accordion-section-knote_header_component_button2","sub-accordion-section-knote_header_component_hamburger","sub-accordion-section-knote_header_component_html","sub-accordion-section-knote_header_component_html2","sub-accordion-section-knote_header_component_shortcode","sub-accordion-section-knote_header_component_logo","sub-accordion-section-knote_header_component_menu","sub-accordion-section-knote_header_component_search","sub-accordion-section-knote_header_component_social","sub-accordion-section-knote_header_component_scrolling_text","sub-accordion-section-knote_header_component_secondary_menu","sub-accordion-section-knote_header_component_offcanvas_menu","sub-accordion-section-knote_header_component_cart","sub-accordion-section-knote_header_component_contact_information","sub-accordion-section-knote_section_footer_row_above","sub-accordion-section-knote_section_footer_row_main","sub-accordion-section-knote_section_footer_row_below","sub-accordion-section-knote_footer_component_widget1","sub-accordion-section-knote_footer_component_widget2","sub-accordion-section-knote_footer_component_widget3","sub-accordion-section-knote_footer_component_widget4","sub-accordion-section-knote_footer_component_widget5","sub-accordion-section-knote_footer_component_widget6","sub-accordion-section-knote_footer_component_widget_area","sub-accordion-section-knote_footer_component_credits","sub-accordion-section-knote_footer_component_shortcode","sub-accordion-section-knote_footer_component_button","sub-accordion-section-knote_footer_component_button2","sub-accordion-section-knote_footer_component_html","sub-accordion-section-knote_footer_component_html2","sub-accordion-section-knote_footer_component_footer_menu","sub-accordion-section-knote_footer_component_policy_menu","sub-accordion-section-knote_footer_component_payment_icons"],r=0,o=["above","main","below"];r<o.length;r++)for(var n=o[r],a=1;a<=6;a++)t.push("sub-accordion-section-knote_builder_header_row_"+n+"_column"+a),t.push("sub-accordion-section-knote_builder_footer_row_"+n+"_column"+a);var i="";e(document).on("mouseover focus",".customize-section-back",(function(t){i=e(".control-section.open").attr("id")})),e(document).on("click keydown",".customize-section-back",(function(e){if(t.includes(i)){if(-1!==i.indexOf("_header_row_above_column"))return wp.customize.section("knote_section_header_row_above").focus(),!1;if(-1!==i.indexOf("_header_row_main_column"))return wp.customize.section("knote_section_header_row_main").focus(),!1;if(-1!==i.indexOf("_header_row_below_column"))return wp.customize.section("knote_section_header_row_below").focus(),!1;if(-1!==i.indexOf("_footer_row_above_column"))return wp.customize.section("knote_section_footer_row_above").focus(),!1;if(-1!==i.indexOf("_footer_row_main_column"))return wp.customize.section("knote_section_footer_row_main").focus(),!1;if(-1!==i.indexOf("_footer_row_below_column"))return wp.customize.section("knote_section_footer_row_below").focus(),!1;-1!==i.indexOf("_header_")?wp.customize.section("knote_section_header_wrapper").focus():wp.customize.section("knote_section_footer_wrapper").focus()}}))},storeGlobals:function(){var t=this;e(".wp-full-overlay-footer .devices button").on("click",(function(){var r=e(this).attr("data-device");"tablet"===r&&(r="mobile"),"footer"===t.currentBuilderType&&(r="desktop"),t.currentDevice=r,t.builderGridContent()})),e(document).on("click mouseover",".knote-builder-area:not(.builder-available-components)",(function(r){if(e("#knote-builder-elements").hasClass("active"))return!1;t.currentRowInput=e("#_customize-input-knote_builder_"+e(this).data("builder-row")),t.currentRow=e(this).closest(".block-builder__row"),t.currentColumnPos=e(this).index()-1,t.currentColumn=e(this),!t.currentRow.length&&e(this).hasClass("knote-builder-area-offcanvas")&&(t.currentRowInput=e("#_customize-input-knote_builder_mobile_offcanvas"),t.currentRow=e(".knote-builder-area-offcanvas"),t.currentColumnPos=e(this).index())})),e(document).on("click mouseover",".element-button",(function(r){t.currentComponent=e(this).data("element-id")}))},builderGridContent:function(){var t=this,r=["#_customize-input-knote_builder_header_row_above","#_customize-input-knote_builder_header_row_main","#_customize-input-knote_builder_header_row_below","#_customize-input-knote_builder_mobile_offcanvas"];if(t.currentBuilderType&&"footer"===t.currentBuilderType&&(r=["#_customize-input-knote_builder_footer_row_above","#_customize-input-knote_builder_footer_row_main","#_customize-input-knote_builder_footer_row_below"]),t.builderGridContentFlag)return!1;t.builderGridContentFlag=!0,setTimeout((function(){var o,n=_createForOfIteratorHelper(r);try{for(n.s();!(o=n.n()).done;){var a=o.value,i=t.jsonDecode(e(a).val()),u="";if(-1!==a.indexOf(t.currentBuilderType+"_row_above")&&(u="above"),-1!==a.indexOf(t.currentBuilderType+"_row_main")&&(u="main"),-1!==a.indexOf(t.currentBuilderType+"_row_below")&&(u="below"),-1!==a.indexOf("mobile_offcanvas")&&(u="mobile_offcanvas"),e('.knote-builder-area[data-builder-row="'+t.currentBuilderType+"_row_"+u+'"]').each((function(){e(this).remove()})),"desktop"===t.currentDevice){var s,l=1,c=_createForOfIteratorHelper(i.desktop);try{for(c.s();!(s=c.n()).done;){var d=s.value;e(".knote-builder-"+t.currentBuilderType+" .knote-builder-"+u+"-row").append('<div class="knote-builder-area" data-builder-row="'+t.currentBuilderType+"_row_"+u+'"><a class="btn-column-edit" href="#" onClick="event.stopPropagation(); wp.customize.section(\'knote_builder_'+t.currentBuilderType+"_row_"+u+"_column"+l+'\').focus();"><svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="2" height="15" fill="#FFF"/><rect x="7" width="2" height="15" fill="#FFF"/><rect y="3" width="3" height="16" transform="rotate(-90 0 3)" fill="#FFF"/><rect y="15" width="2" height="16" transform="rotate(-90 0 15)" fill="#FFF"/><rect x="14" width="2" height="15" fill="#FFF"/></svg></a>');var _=e(".knote-builder-"+u+"-row").find(".knote-builder-area:last-child");if(d.length){var p,m=_createForOfIteratorHelper(d);try{for(m.s();!(p=m.n()).done;){var f=p.value;"object"===_typeof(f=t.getElementData(f))&&_.append('<div class="builder-element-item"><a href="#" class="element-button" data-element-id="'+f.id+'" data-section-focus="knote_'+t.currentBuilderType+"_component_"+f.id+'"><span class="title-element">'+f.label+'</span><i class="btn-element-edit dashicons dashicons-admin-generic"></i><i class="btn-element-remove dashicons dashicons-no-alt"></i></a></div>')}}catch(e){m.e(e)}finally{m.f()}}l++}}catch(e){c.e(e)}finally{c.f()}}if("mobile"===t.currentDevice){var b,h=1,v=_createForOfIteratorHelper(i.mobile);try{for(v.s();!(b=v.n()).done;){var w=b.value;e(".knote-builder-header .knote-builder-"+u+"-row").append('<div class="knote-builder-area" data-builder-row="header_row_'+u+'"><a class="btn-column-edit" href="#" onClick="event.stopPropagation(); wp.customize.section(\'knote_builder_header_row_'+u+"_column"+h+'\').focus();"><svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="2" height="15" fill="#FFF"/><rect x="7" width="2" height="15" fill="#FFF"/><rect y="3" width="3" height="16" transform="rotate(-90 0 3)" fill="#FFF"/><rect y="15" width="2" height="16" transform="rotate(-90 0 15)" fill="#FFF"/><rect x="14" width="2" height="15" fill="#FFF"/></svg></a>');_=e(".knote-builder-"+u+"-row").find(".knote-builder-area:last-child");if(w.length){var y,g=_createForOfIteratorHelper(w);try{for(g.s();!(y=g.n()).done;){var C=y.value;C=t.getElementData(C),_.append('<div class="builder-element-item"><a href="#" class="element-button" data-element-id="'+C.id+'" data-section-focus="knote_header_component_'+C.id+'"><span class="title-element">'+C.label+'</span><i class="btn-element-edit dashicons dashicons-admin-generic"></i><i class="btn-element-remove dashicons dashicons-no-alt"></i></a></div>')}}catch(e){g.e(e)}finally{g.f()}}h++}}catch(e){v.e(e)}finally{v.f()}if(-1!==a.indexOf("mobile_offcanvas")&&(e(".knote-builder-area-offcanvas").html(""),i.mobile_offcanvas.length)){var B,O=_createForOfIteratorHelper(i.mobile_offcanvas[0]);try{for(O.s();!(B=O.n()).done;){var T=B.value;T=t.getElementData(T),e(".knote-builder-area-offcanvas").append('<div class="builder-element-item"><a href="#" class="element-button" data-element-id="'+T.id+'" data-section-focus="knote_header_component_'+T.id+'"><span class="title-element">'+T.label+'</span><i class="btn-element-edit dashicons dashicons-admin-generic"></i><i class="btn-element-remove dashicons dashicons-no-alt"></i></a></div>')}}catch(e){O.e(e)}finally{O.f()}}}}}catch(e){n.e(e)}finally{n.f()}if(!t.currentBuilder)return t.builderGridContentFlag=!1,!1;t.elementsSortable(),t.builderGridContentFlag=!1}),this.updateGridDelay)},elementsButtonAdd:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,o=r.jsonDecode(r.currentRowInput.val()),n=r.currentDevice;return"mobile"===r.currentDevice&&r.currentRow.hasClass("knote-builder-area-offcanvas")&&(n="mobile_offcanvas"),t?o[n][r.currentColumnPos]=r.componentsOrder:o[n][r.currentColumnPos].push(e),!("offcanvas_menu"===r.currentComponent&&!r.currentRow.hasClass("knote-builder-area-offcanvas"))&&(("hamburger"!==r.currentComponent||!r.currentRow.hasClass("knote-builder-area-offcanvas"))&&(r.currentRowInput.val(JSON.stringify(o)),r.currentRowInput.trigger("change"),"header"===r.currentBuilderType&&r.currentRowInput.closest(".customize-control").next().find("input").val(Math.random()).trigger("change"),r.elementsPopupContent(),void r.builderGridContent()))},elementsButtonRemove:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,o=r.jsonDecode(r.currentRowInput.val()),n=r.currentDevice;"mobile"===r.currentDevice&&r.currentRow.hasClass("knote-builder-area-offcanvas")&&(n="mobile_offcanvas"),o[n][r.currentColumnPos]=o[n][r.currentColumnPos].filter((function(t){return t!==e})),r.currentRowInput.val(JSON.stringify(o)),t&&(r.currentRowInput.trigger("change"),r.currentRowInput.closest(".customize-control").next().find("input").val(Math.random()).trigger("change")),r.elementsPopupContent(),r.builderGridContent()},elementsSortable:function(){var t=this;e(".knote-builder-area").each((function(){e(this).sortable({placeholder:"builder-element-item builder-state-highlight",connectWith:".knote-builder-area",scroll:!1,cancel:".btn-column-edit",change:function(r,o){t.currentComponent=e(o.item[0]).find(".element-button").data("element-id"),t.currentRow=e(o.placeholder[0]).closest(".block-builder__row").length?e(o.placeholder[0]).closest(".block-builder__row"):e(o.placeholder[0]).closest(".knote-builder-area-offcanvas"),t.currentRowInput=e("#_customize-input-knote_builder_"+o.placeholder.closest(".knote-builder-area").data("builder-row"));var n=[];o.placeholder.closest(".knote-builder-area").find(".ui-sortable-placeholder").attr("data-element-id",t.currentComponent),o.placeholder.closest(".knote-builder-area").find(".builder-element-item").each((function(){var t=void 0!==e(this).find(".element-button").data("element-id")?e(this).find(".element-button").data("element-id"):e(this).data("element-id");e(this).hasClass("ui-sortable-helper")||n.push(t)})),t.componentsOrder=n},update:function(r,o){if(this===o.item.parent()[0]){var n=o.item.find("> .element-button").data("element-id"),a=o.item.closest(".knote-builder-area").data("builder-row"),i=o.item.closest(".knote-builder-area").index()-1,u=null!==o.sender?o.sender.data("builder-row"):null,s=null!==o.sender?o.sender.index()-1:null;if(null===o.sender)return t.elementsButtonAdd("",!0),!1;o.sender.hasClass("builder-available-components")||(t.currentRowInput=e("#_customize-input-knote_builder_"+u)),t.currentColumnPos=s,t.elementsButtonRemove(n,!0),o.sender.hasClass("builder-available-components")||(t.currentRowInput=e("#_customize-input-knote_builder_"+a)),t.currentColumnPos=i,t.elementsButtonAdd(n,!0)}}}),e(this).disableSelection()}))},elementsButton:function(){var t=this;e(document).on("click",".builder-element-item > a",(function(r){r.preventDefault(),r.stopPropagation();var o=e(this).data("element-id"),n=e(this).data("section-focus");if(e(this).closest("#knote-builder-elements").length)t.elementsButtonAdd(o),t.currentBuilder.find("#knote-builder-elements").removeClass("active");else if(r.target.classList.contains("btn-element-remove"))return t.elementsButtonRemove(o),!1;setTimeout((function(){wp.customize.section(n).focus()}),this.updateGridDelay)}))},builderCustomColumns:function(){var t=this;["knote_builder_header_row_above_columns","knote_builder_header_row_main_columns","knote_builder_header_row_below_columns","knote_builder_footer_row_above_columns","knote_builder_footer_row_main_columns","knote_builder_footer_row_below_columns"].forEach((function(r){if(void 0!==wp.customize.control(r))for(var o=-1!==r.indexOf("header")?["desktop","tablet"]:["desktop"],n=function(){var o=i[a],n="_"+o;wp.customize(r+n,(function(n){n.bind((function(n){for(var a="",i="",u=0,s=["above","main","below"];u<s.length;u++){var l=s[u],c="knote_builder_"+t.currentBuilderType+"_row_"+l,d="#_customize-input-knote_builder_"+t.currentBuilderType+"_row_"+l;-1!==r.indexOf(c)&&(a="knote-builder-"+l+"-row",i=e(d),t.currentRow=l)}if(""===a||""===i)return!1;var _=t.jsonDecode(i.val());if(n<_[t.currentDevice].length)for(;_[t.currentDevice].length>n;)_[t.currentDevice].pop();else if(n>_[t.currentDevice].length)for(;_[t.currentDevice].length<n;)_[t.currentDevice].push([]);i.val(JSON.stringify(_)),t.updateColumnsLayoutOption(o,n),t.updateAvailableColumnsArea(o,n),i.trigger("change"),"header"===t.currentBuilderType&&"mobile"===t.currentDevice&&i.closest(".customize-control").next().find("input").val(Math.random()).trigger("change"),t.builderGridContent()}))}))},a=0,i=o;a<i.length;a++)n()}));for(var r=["above","main","below"],o=0,n=["header","footer"];o<n.length;o++){var a,i=n[o],u=_createForOfIteratorHelper(r);try{var s=function(){var r=a.value,o="knote_section_"+i+"_row_"+r;void 0!==wp.customize.section(o)&&wp.customize.section(o).expanded.bind((function(n){if(n){-1!==o.indexOf("header")?t.currentBuilderType="header":-1!==o.indexOf("footer")&&(t.currentBuilderType="footer");for(var a="header"===t.currentBuilderType?["desktop","tablet"]:["desktop"],i=function(){var o=s[u];setTimeout((function(){var n="knote_builder_"+t.currentBuilderType+"_row_"+r+"_columns_"+o;t.currentRow=r,t.currentRowInput=e("#_customize-input-knote_builder_"+t.currentBuilderType+"_row_"+r),t.updateColumnsLayoutOption(o,wp.customize(n).get()),t.updateAvailableColumnsArea(o,wp.customize(n).get())}),50)},u=0,s=a;u<s.length;u++)i()}}))};for(u.s();!(a=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}}},updateColumnsLayoutOption:function(t,r){var o=this,n="knote_builder_"+o.currentBuilderType+"_row_"+o.currentRow+"_columns_layout_"+t;e('label[for*="'+n+'"]').css("display","none"),e('label[for*="'+n+"-column-"+r+'"]').css("display","block"),wp.customize(n,(function(n){-1==n.get().indexOf(r)&&e('label[for="knote_builder_'+o.currentBuilderType+"_row_"+o.currentRow+"_columns_layout_"+t+"-column-"+r+'-equal"]').click()}))},builderColumnsLayout:function(){var t=this;["knote_builder_header_row_above_columns_layout","knote_builder_header_row_main_columns_layout","knote_builder_header_row_below_columns_layout","knote_builder_footer_row_above_columns_layout","knote_builder_footer_row_main_columns_layout","knote_builder_footer_row_below_columns_layout"].forEach((function(r){if(void 0!==wp.customize.control(r))for(var o=-1!==r.indexOf("header")?["desktop","tablet"]:["desktop"],n=function(){var o=i[a],n="_"+o;wp.customize(r+n,(function(n){var a=n.get(),i="above";-1!==r.indexOf("main")?i="main":-1!==r.indexOf("below")&&(i="below"),"tablet"===o&&(o="mobile");var u=e(".knote-builder-"+t.currentBuilderType+" .knote-builder-"+o+" .knote-builder-row-"+i);u.removeClass("columns-layout-equal"),u.removeClass("columns-layout-fluid"),u.removeClass("columns-layout-bigleft"),u.removeClass("columns-layout-bigright"),-1!==a.indexOf("equal")&&u.addClass("columns-layout-equal"),-1!==a.indexOf("bigleft")&&u.addClass("columns-layout-bigleft"),-1!==a.indexOf("bigright")&&u.addClass("columns-layout-bigright"),-1!==a.indexOf("fluid")&&u.addClass("columns-layout-fluid"),n.bind((function(n){var a="above";-1!==r.indexOf("main")?a="main":-1!==r.indexOf("below")&&(a="below"),"tablet"===o&&(o="mobile"),t.currentRowInput=e("#_customize-input-knote_builder_"+t.currentBuilderType+"_row_"+a);var i=e(".knote-builder-"+t.currentBuilderType+" .knote-builder-"+o+" .knote-builder-row-"+a);i.removeClass("columns-layout-equal"),i.removeClass("columns-layout-equal"),i.removeClass("columns-layout-bigleft"),i.removeClass("columns-layout-bigright"),-1!==n.indexOf("equal")&&i.addClass("columns-layout-equal"),-1!==n.indexOf("bigleft")&&i.addClass("columns-layout-bigleft"),-1!==n.indexOf("bigright")&&i.addClass("columns-layout-bigright"),-1!==n.indexOf("fluid")&&i.addClass("columns-layout-fluid");var u=t.currentRowInput.val();t.currentRowInput.val("").trigger("change"),t.currentRowInput.val(u).trigger("change"),"header"===t.currentBuilderType&&"mobile"===t.currentDevice&&t.currentRowInput.closest(".customize-control").next().find("input").val(Math.random()).trigger("change")}))}))},a=0,i=o;a<i.length;a++)n()}))},getElementData:function(e){var t=[].concat(_toConsumableArray(knote_builder.components.desktop),_toConsumableArray(knote_builder.components.mobile));"footer"===this.currentBuilderType&&(t=knote_builder.components.footer);var r,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var n=r.value;if(n.id===e)return n}}catch(e){o.e(e)}finally{o.f()}return""},getElementsUnused:function(){var t=knote_builder.components.desktop,r=knote_builder.components.mobile,o=["#_customize-input-knote_builder_header_row_above","#_customize-input-knote_builder_header_row_main","#_customize-input-knote_builder_header_row_below","#_customize-input-knote_builder_mobile_offcanvas"];"footer"===this.currentBuilderType&&(t=knote_builder.components.footer,o=["#_customize-input-knote_builder_footer_row_above","#_customize-input-knote_builder_footer_row_main","#_customize-input-knote_builder_footer_row_below"]);for(var n=0,a=o;n<a.length;n++){var i,u=a[n],s=_createForOfIteratorHelper(t);try{for(s.s();!(i=s.n()).done;){i.value;var l=this.jsonDecode(e(u).val());if(l.desktop.length){var c,d=_createForOfIteratorHelper(l.desktop);try{var _=function(){var e=c.value;t=t.filter((function(t){return!e.includes(t.id)}))};for(d.s();!(c=d.n()).done;)_()}catch(e){d.e(e)}finally{d.f()}}}}catch(e){s.e(e)}finally{s.f()}var p,m=_createForOfIteratorHelper(r);try{for(m.s();!(p=m.n()).done;){p.value;var f=this.jsonDecode(e(u).val());if(f.mobile.length){var b,h=_createForOfIteratorHelper(f.mobile);try{var v=function(){var e=b.value;r=r.filter((function(t){return!e.includes(t.id)}))};for(h.s();!(b=h.n()).done;)v()}catch(e){h.e(e)}finally{h.f()}}if(-1!==u.indexOf("_mobile_offcanvas")&&f.mobile_offcanvas.length){var w,y=_createForOfIteratorHelper(f.mobile_offcanvas);try{var g=function(){var e=w.value;r=r.filter((function(t){return!e.includes(t.id)}))};for(y.s();!(w=y.n()).done;)g()}catch(e){y.e(e)}finally{y.f()}}}}catch(e){m.e(e)}finally{m.f()}}return{desktop:t,mobile:r}},elementsPopup:function(){var t=this;e(document).on("click",".knote-builder-area:not(.builder-available-components)",(function(r){var o=t.currentBuilder.find("#knote-builder-elements"),n=e(this)[0].getBoundingClientRect(),a=e(this).data("builder-row");setTimeout((function(){if(o.css("top",0),o.css("left",n.left),o.css("top",n.top-(o.height()+66)),t.isElementInViewport(o)?(o.css("left",n.left),o.css("right","auto")):(o.css("left","auto"),o.css("right",25)),r.target.classList.contains("btn-element-remove")||r.target.classList.contains("element-button"))return!1;o.addClass("active")}),this.updateGridDelay),t.elementsPopupContent(a),t.builderGridContent()})),e("#customize-preview iframe").on("mouseup",(function(e){t.closeElementsPopup(e)})),e(document).on("mouseup",(function(e){if(!t.currentBuilder)return!1;t.closeElementsPopup(e)}))},closeElementsPopup:function(e){var t=this.currentBuilder.find("#knote-builder-elements");null===e.target.closest("#knote-builder-elements")&&t.removeClass("active")},isElementInViewport:function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var r=t.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||e(window).height())&&r.right<=(window.innerWidth||e(window).width())},elementsPopupContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this.getElementsUnused(),o=e(".knote-builder-elements-desktop"),n=e(".knote-builder-elements-mobile");if(o.html(""),n.html(""),r.desktop.length){var a,i=_createForOfIteratorHelper(r.desktop);try{for(i.s();!(a=i.n()).done;){var u=a.value;o.append('<div class="builder-element-item builder-element-item-desktop"><a href="#" class="element-button" data-element-id="'+u.id+'" data-section-focus="knote_'+this.currentBuilderType+"_component_"+u.id+'">'+u.label+"</a></div>")}}catch(e){i.e(e)}finally{i.f()}}else o.append('<p class="builder-elements-message">'+knote_builder.i18n.elementsMessage+"</p>");if(r.mobile="mobile_offcanvas"!==t?r.mobile.filter((function(e){return"offcanvas_menu"!==e.id})):r.mobile.filter((function(e){return"secondary_menu"!==e.id&&"hamburger"!==e.id})),r.mobile.length){var s,l=_createForOfIteratorHelper(r.mobile);try{for(l.s();!(s=l.n()).done;){var c=s.value;n.append('<div class="builder-element-item builder-element-item-desktop"><a href="#" class="element-button" data-element-id="'+c.id+'" data-section-focus="knote_'+this.currentBuilderType+"_component_"+c.id+'">'+c.label+"</a></div>")}}catch(e){l.e(e)}finally{l.f()}}else n.append('<p class="builder-elements-message">'+knote_builder.i18n.elementsMessage+"</p>");this.addUpsellComponents()},updateAvailableColumnsArea:function(e,t){var r=this.currentRowInput.closest(".control-section").find(".builder-available-columns-"+e+" .columns-item");r.addClass("hide");for(var o=1;o<=t;o++)r.eq(o-1).removeClass("hide")},showHideBuilderTop:function(){var t=this;e(".knote-builder-bottom-display").on("click",(function(r){r.preventDefault(),e(this).toggleClass("active"),e(".knote-builder-top").toggleClass("active"),t.builderGridContent()}))},showHideBuilder:function(){for(var t=this,r=["knote_section_header_wrapper","knote_section_header_row_main","knote_section_header_row_above","knote_section_header_row_below","knote_header_component_button","knote_header_component_button2","knote_header_component_hamburger","knote_header_component_html","knote_header_component_html2","knote_header_component_logo","knote_header_component_shortcode","knote_header_component_menu","knote_header_component_search","knote_header_component_social","knote_header_component_scrolling_text","knote_section_header_mobile_offcanvas","knote_header_component_secondary_menu","knote_header_component_contact_information","knote_header_component_cart","knote_section_footer_wrapper","knote_section_footer_row_main","knote_section_footer_row_above","knote_section_footer_row_below","knote_footer_component_credits","knote_footer_component_widget1","knote_footer_component_widget2","knote_footer_component_widget3","knote_footer_component_widget4","knote_footer_component_widget5","knote_footer_component_widget6","knote_footer_component_widget_area","knote_footer_component_shortcode","knote_footer_component_button","knote_footer_component_button2","knote_footer_component_html","knote_footer_component_html2","knote_footer_component_footer_menu","knote_footer_component_policy_menu","knote_footer_component_payment_icons"],o=0,n=["above","main","below"];o<n.length;o++)for(var a=n[o],i=1;i<=6;i++)r.push("knote_builder_header_row_"+a+"_column"+i),r.push("knote_builder_footer_row_"+a+"_column"+i);r.forEach((function(r){void 0!==wp.customize.section(r)&&wp.customize.section(r).expanded.bind((function(o){t.currentBuilder=t.getCurrentBuilderByComponent(r),t.currentBuilderType=t.currentBuilder.hasClass("knote-builder-header")?"header":"footer",o?"header"==t.currentBuilderType?(e("body").removeClass("js-footer-builder"),e("body").addClass("js-active-builder js-header-builder"),t.scrollToBuilderArea()):"footer"==t.currentBuilderType&&(e("body").removeClass("js-header-builder"),e("body").addClass("js-active-builder js-footer-builder"),t.scrollToBuilderArea()):e("body").removeClass("js-header-builder js-footer-builder js-active-builder"),setTimeout((function(){t.builderGridContent()}),100)}))}))},addUpsellComponents:function(){if(!knote_builder.upsell_components.enable)return!1;var t,r="",o=_createForOfIteratorHelper("header"===this.currentBuilderType?knote_builder.upsell_components.header:knote_builder.upsell_components.footer);try{for(o.s();!(t=o.n()).done;){var n=t.value;r+='<div class="builder-element-item builder-element-item-desktop"><a href="#" class="element-button" data-element-id="'+n.id+'" data-section-focus="knote_'+this.currentBuilderType+"_component_"+n.id+'">'+n.label+"</a></div>"}}catch(e){o.e(e)}finally{o.f()}var a='<div class="knote-upsell-components-wrapper"><h4>'.concat(knote_builder.upsell_components.title,'</h4><div class="knote-upsell-components">').concat(r,"</div>\n                    <p>").concat(knote_builder.upsell_components.total,'</p>\n                    <a href="').concat(knote_builder.upsell_components.link,'" target="_blank" class="button">').concat(knote_builder.upsell_components.button,"</a>\n                </div>\n            ");e("#knote-builder-elements .knote-builder-elements-wrapper .knote-upsell-components-wrapper").remove(),e("#knote-builder-elements .knote-builder-elements-wrapper").append(a)},getCurrentBuilderByComponent:function(t){return-1!==t.indexOf("_header_")?e(".knote-builder-header"):-1!==t.indexOf("_footer_")&&e(".knote-builder-footer")},scrollToBuilderArea:function(){var t=document.querySelector("#customize-preview > iframe").contentWindow.document.getElementsByTagName("html")[0],r="header"===this.currentBuilderType?0:1e4;e(t).animate({scrollTop:r},"smooth")}},e(document).ready((function(){builder.init()}))}(jQuery);
